# Switch2Go iOS App - CocoaPods Configuration
# Run 'pod install' after editing this file

platform :ios, '15.0'

# Disable CocoaPods analytics
ENV['COCOAPODS_DISABLE_STATS'] = 'true'

target 'iosApp' do
  use_frameworks!

  # MediaPipe Tasks for face landmark detection
  # This provides the FaceLandmarker API for eye tracking
  pod 'MediaPipeTasksVision', '~> 0.10.14'

  target 'iosAppTests' do
    inherit! :search_paths
  end

  target 'iosAppUITests' do
    inherit! :search_paths
  end
end

# Post-install configuration
post_install do |installer|
  installer.pods_project.targets.each do |target|
    target.build_configurations.each do |config|
      # Set minimum iOS version
      config.build_settings['IPHONEOS_DEPLOYMENT_TARGET'] = '15.0'

      # Enable module stability for Swift packages
      config.build_settings['BUILD_LIBRARY_FOR_DISTRIBUTION'] = 'YES'

      # Suppress warnings from pods
      config.build_settings['GCC_WARN_INHIBIT_ALL_WARNINGS'] = 'YES'

      # Required for Apple Silicon Macs
      config.build_settings['EXCLUDED_ARCHS[sdk=iphonesimulator*]'] = 'arm64' if target.name.include?('MediaPipe')
    end
  end
end
